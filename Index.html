<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cálculo da Média - Disciplina (Corrigido)</title>
  <style>
    body{font-family: Arial, sans-serif;padding:24px;background:#f6f7fb;}
    .card{background:#fff;padding:18px;border-radius:10px;max-width:480px;margin:0 auto;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
    input{width:100%;padding:10px;margin-top:6px;border-radius:6px;border:1px solid #ddd;font-size:15px}
    .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
    button{padding:10px 14px;border-radius:8px;border:0;cursor:pointer}
    .primary{background:#2563eb;color:#fff}
    .secondary{background:#eef2ff;color:#2563eb}
    .result{margin-top:12px;padding:10px;border-radius:8px;background:#f8fafc;border:1px solid #e6eefc;font-weight:600}
    .error{color:#ef4444;margin-top:8px}
    small{color:#6b7280}
  </style>
</head>
<body>
  <main class="card" role="main">
    <h2>Cálculo da Média</h2>
    <p><small>Digite as duas notas (0 a 10). Use ponto ou vírgula como separador decimal.</small></p>

    <label for="nota1">Nota 1</label>
    <input id="nota1" type="text" placeholder="Ex.: 4.5 ou 4,5">

    <label for="nota2" style="margin-top:8px">Nota 2</label>
    <input id="nota2" type="text" placeholder="Ex.: 8.5 ou 8,5">

    <div class="actions">
      <button id="limparBtn" class="secondary" type="button">Limpar</button>
      <button id="calcularBtn" class="primary" type="button">Calcular</button>
    </div>

    <div id="mensagem"></div>
    <div id="resultado" class="result" style="display:none"></div>
  </main>

  <script>
    (function(){
      const nota1El = document.getElementById('nota1');
      const nota2El = document.getElementById('nota2');
      const calcularBtn = document.getElementById('calcularBtn');
      const limparBtn = document.getElementById('limparBtn');
      const resultadoEl = document.getElementById('resultado');
      const mensagemEl = document.getElementById('mensagem');

      function showError(text){
        mensagemEl.innerHTML = '<div class="error">' + text + '</div>';
        resultadoEl.style.display = 'none';
      }

      function clearMessages(){
        mensagemEl.innerHTML = '';
        resultadoEl.style.display = 'none';
      }

      function parseNumero(text){
        if(typeof text !== 'string') return NaN;
        const t = text.trim().replace(',', '.');
        return parseFloat(t);
      }

      function calcularMedia(){
        clearMessages();
        const raw1 = nota1El.value;
        const raw2 = nota2El.value;

        console.log('Entradas:', raw1, raw2); // debug

        if(!raw1 || !raw2){
          showError('Preencha ambas as notas.');
          return;
        }

        const n1 = parseNumero(raw1);
        const n2 = parseNumero(raw2);

        console.log('Convertidos:', n1, n2); // debug

        if(Number.isNaN(n1) || Number.isNaN(n2)){
          showError('Valores inválidos. Use números (ex.: 4.5 ou 4,5).');
          return;
        }

        if(n1 < 0 || n1 > 10 || n2 < 0 || n2 > 10){
          showError('As notas devem estar entre 0 e 10.');
          return;
        }

        const media = (n1 + n2) / 2;
        const mediaFormatada = media.toFixed(1).replace('.', ',');

        resultadoEl.innerHTML = `A média entre ${String(n1).replace('.',',')} e ${String(n2).replace('.',',')} é <strong>${mediaFormatada}</strong>.`;
        resultadoEl.style.display = 'block';
        console.log('Média calculada:', media);
      }

      calcularBtn.addEventListener('click', calcularMedia);

      limparBtn.addEventListener('click', function(){
        nota1El.value = '';
        nota2El.value = '';
        clearMessages();
        nota1El.focus();
      });

      // Permitir Enter para calcular em qualquer campo
      [nota1El, nota2El].forEach(el => {
        el.addEventListener('keydown', function(e){
          if(e.key === 'Enter') {
            e.preventDefault();
            calcularMedia();
          }
        });
      });
    })();
  </script>
</body>
</html>
